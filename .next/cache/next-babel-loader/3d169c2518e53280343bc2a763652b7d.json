{"ast":null,"code":"import firebase from '../../../lib/myFirebase';\nexport const getListings = async ({\n  startAfter,\n  appliedFilters,\n  fetchPrevious,\n  startAt\n}) => {\n  try {\n    // let previous = false;\n    // let w = await createWhereClauses({ appliedFilters });\n    let query = firebase.collection(\"listings\"); // for (let i of w) {\n    // \tquery = query.where(...i);\n    // }\n    // //query = query.where(\"PropertyType\",\"All\");\n\n    query = query.orderBy(\"LastChangeTimestamp\", \"desc\"); //Matrix_Unique_ID\n    // if (fetchPrevious) {\n    // \tquery = query.endBefore(firstListing);\n    // }\n    // if (startAfter) {\n    // \tquery = query.startAfter(lastListing);\n    // \tprevious = true;\n    // }\n\n    await query.limit(10).get().then(async res => {\n      // count = count + 1;\n      // var circularObj = {};\n      // circularObj.circularRef = res.docs[res.docs.length-1];\n      // circularObj.list = [ circularObj, circularObj ];\n      // lastListing = res.docs[res.docs.length - 1];\n      // if(count%2 === 0 || count === 1){\n      // \tif(count !== 2){\n      // firstListing = res.docs[0];\n      // \t}\n      // }\n      const data = res.docs.map(doc => doc.data());\n      return data; // dispatch(saveFirstListObj({ data: data[0] }));\n      // dispatch(getListingSuccess({ data, previous }));\n    });\n  } catch (error) {\n    return error;\n  }\n};","map":{"version":3,"sources":["/home/b-rave/Documents/jalaj/trulia-clone/hello-next/pages/api/getListings/getListingFunc.js"],"names":["firebase","getListings","startAfter","appliedFilters","fetchPrevious","startAt","query","collection","orderBy","limit","get","then","res","data","docs","map","doc","error"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,yBAArB;AAEA,OAAO,MAAMC,WAAW,GAAG,OAAO;AAAEC,EAAAA,UAAF;AAAcC,EAAAA,cAAd;AAA8BC,EAAAA,aAA9B;AAA6CC,EAAAA;AAA7C,CAAP,KAAkE;AAEzF,MAAI;AACA;AACA;AACA,QAAIC,KAAK,GAAGN,QAAQ,CAACO,UAAT,CAAoB,UAApB,CAAZ,CAHA,CAIA;AACA;AACA;AACA;;AACAD,IAAAA,KAAK,GAAGA,KAAK,CAACE,OAAN,CAAc,qBAAd,EAAqC,MAArC,CAAR,CARA,CAQqD;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,UAAMF,KAAK,CACNG,KADC,CACK,EADL,EAEDC,GAFC,GAGDC,IAHC,CAGI,MAAMC,GAAN,IAAa;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAMC,IAAI,GAAGD,GAAG,CAACE,IAAJ,CAASC,GAAT,CAAaC,GAAG,IAAKA,GAAG,CAACH,IAAJ,EAArB,CAAb;AACA,aAAOA,IAAP,CAZe,CAaf;AACA;AACH,KAlBC,CAAN;AAmBH,GApCD,CAoCE,OAAOI,KAAP,EAAc;AACZ,WAAOA,KAAP;AACH;AACJ,CAzCM","sourcesContent":["import firebase from '../../../lib/myFirebase';\n\nexport const getListings = async ({ startAfter, appliedFilters, fetchPrevious, startAt }) => {\n\n    try {\n        // let previous = false;\n        // let w = await createWhereClauses({ appliedFilters });\n        let query = firebase.collection(\"listings\");\n        // for (let i of w) {\n        // \tquery = query.where(...i);\n        // }\n        // //query = query.where(\"PropertyType\",\"All\");\n        query = query.orderBy(\"LastChangeTimestamp\", \"desc\");//Matrix_Unique_ID\n\n        // if (fetchPrevious) {\n        // \tquery = query.endBefore(firstListing);\n        // }\n        // if (startAfter) {\n        // \tquery = query.startAfter(lastListing);\n        // \tprevious = true;\n        // }\n        await query\n            .limit(10)\n            .get()\n            .then(async res => {\n                // count = count + 1;\n                // var circularObj = {};\n                // circularObj.circularRef = res.docs[res.docs.length-1];\n                // circularObj.list = [ circularObj, circularObj ];\n                // lastListing = res.docs[res.docs.length - 1];\n                // if(count%2 === 0 || count === 1){\n                // \tif(count !== 2){\n                // firstListing = res.docs[0];\n                // \t}\n                // }\n                const data = res.docs.map(doc => (doc.data()));\n                return data;\n                // dispatch(saveFirstListObj({ data: data[0] }));\n                // dispatch(getListingSuccess({ data, previous }));\n            });\n    } catch (error) {\n        return error;\n    }\n};"]},"metadata":{},"sourceType":"module"}